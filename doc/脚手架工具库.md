## 脚手架工具库

### 一、execa 子进程管理工具

1、安装依赖

```
npm install --save execa
```

2、示例

```
#!/usr/bin/env node

const execa = require("execa");

const dirs = async () => {
	const res = await execa('ls')
	console.log(res);
}

dirs();
```

### 二、listr 处理顺序任务

1、安装依赖

```
npm install --save listr
```

2、示例

```
#!/usr/bin/env node

const execa = require("execa");
const Listr = require("listr");

new Listr([
  {
    title: "Removing package-lock",
    task: () => execa("rm", ["package-lock.json"])
  },
  {
    title: "Running npm install",
    task: () => execa("npm", ["install"])
  },
  {
    title: "Adding package-lock to git",
    task: (ctx, task) =>
      execa("git", ["add", "package-lock.json"]).catch(() => task.skip())
  }
]).run();
```

### 三、shelljs 执行操作系统级的命令

1、安装依赖

```
npm i --save shelljs
```

2、示例

```
var shell = require("shelljs");

if (!shell.which("git")) {
    shell.echo("Sorry, this script requires git");
    shell.exit(1);
} else {
	shell.echo("Your environment supports git");
}

// Copy files to release dir
shell.rm("-rf", "out/Release");
shell.cp("-R", "stuff/", "out/Release");
shell.mkdir("lib");

// Replace macros in each .js file
shell.cd("lib");
shell.cd("..");
shell.ls("*.js").forEach(function (file) {
	console.log(file);
});

// Run external tool synchronously
if (shell.exec('git commit -am "Auto-commit"').code !== 0) {
	shell.echo("Error: Git commit failed");
	shell.exit(1);
}
```

### 四、fs-extra 文件

1、安装依赖

```
npm i --save fs-extra
```

2、示例

```
copy
emptyDir
ensureFile
ensureDir
ensureLink
ensureSymlink
mkdirp
mkdirs
move
outputFile
outputJson
pathExists
readJson
remove
writeJson
```

### 五、semver 判断 npm 版本

```
npm i --save semver
```

### 六、consolidate 模板引擎的集成工具

```
1、安装
npm i consolidate --save
npm i ejs --save


// 使用
const consolidate = require('consolidate).ejs;

consolidate.render(templateString, data)
.then(html => {
  console.log(html);
})
```

### 七、Metalsmith 一个非常简单的、可插入的静态站点生成器（遍历指定目录下的所有文件，根据配置的模板引擎自动转换）

```
npm i metalsmith --save


```

### 八、ncp 拷贝文件夹到指定目录，可以使用 fsExtra.copy()

```
npm i ncp --save

```

### 九
